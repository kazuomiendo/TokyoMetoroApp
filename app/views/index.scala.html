@(titele: String)(implicit flash: play.api.mvc.Flash)

@main(titele)(flash) {
  <SELECT id="RailWay">
  </SELECT>
  <div id="map-canvas"></div>

	<script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
	<script>
	var map;
	var mapOptions;
	/**
	 * 初期化
	 */
	function initialize() {
	  mapOptions = {
	    zoom: 15,
	    scrollwheel: false,
	    center: new google.maps.LatLng(35.68159738288667,139.76475656032562)
	  };
	  map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
	  /**
	   * クリック時の処理
	   */
	  google.maps.event.addDomListener(map, 'click', function(event){
	    console.log(event.latLng.k + '|' + event.latLng.B);
	    mapOptions = {
	      scrollwheel: !mapOptions.scrollwheel
	    };
	    map.setOptions(mapOptions);
	  });
	  /**
	   * マウス移動時の処理
	   */
	  google.maps.event.addDomListener(map, 'mousemove', function(event){
	    //console.log(event.latLng.k + '|' + event.latLng.B);
	  });
	  /**
	   * マウスアウト時の処理
	   */
	  google.maps.event.addDomListener(map, 'mouseout', function(event){
	    mapOptions = {
	      scrollwheel: false
	    };
	    map.setOptions(mapOptions);
	  });
	  /**
	   * マウスアウト時の処理
	   */
	  google.maps.event.addDomListener(map, 'dragend', function(event){
	    jsRoutes.controllers.AjaxController.ajaxTokyoMetoroAPIExecute("odpt:Train").ajax({
	      beforeSend: function() {},
	      complete: function() {},
	      success: function(result) {
	        console.log(JSON.parse(result));
	      },
	      error: function(result) {
	        window.alert("エラーが発生しました。画面を更新頂くか、時間をおいてから再度お試し下さい。");
	        $("#map-canvas").append("<p>エラーが発生しました。画面を更新頂くか、時間をおいてから再度お試し下さい。</p>");
	        console.log("error : " + result)
	      }
	    });
	  });

	  // 路線一覧を取得する
	  jsRoutes.controllers.AjaxController.ajaxTokyoMetoroAPIExecute("odpt:Railway").ajax({
      beforeSend: function() {},
      complete: function() {},
      success: function(result) {
				var railWay = JSON.parse(result);
				for (i in railWay) {
					$("#RailWay").append($('<option>').html(railWay[i].dc_title + "線").val(railWay[i].owl_sameAs));
				}
      },
      error: function(result) {
        window.alert("エラーが発生しました。画面を更新頂くか、時間をおいてから再度お試し下さい。");
        $("#map-canvas").append("<p>エラーが発生しました。画面を更新頂くか、時間をおいてから再度お試し下さい。</p>");
        console.log("error : " + result)
      }
    });
	}

	$("#RailWay").change(function() {
		console.log(this.value);
	}).change();
	// 初期化
	google.maps.event.addDomListener(window, 'load', initialize);
	</script>
}
